<?php
	include 'sqlFunctions.php';
	include 'listeFunctions.php';
	
	$id = $_GET["id"];
	if ($id == 0) {
		$task = getNewTask();
		$action = "CREATE";
		$libelle = "Creer";
	} else {
		$task = readTask($id);
		$action = "UPDATE";
		$libelle = "Mettre a jour";
	}
	
	


?>

<html>
<header>
	<link rel="stylesheet" href="style.css">
</header>
<body>
	<div class="background"></div>


	<h1> 
	<svg id="Capa_1" enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><g><path d="m143.194 218.977 46.751-56.244c2.648-3.186 2.212-7.914-.974-10.562-3.184-2.647-7.914-2.211-10.562.974l-40.074 48.211-8.759-14.228c-2.171-3.527-6.79-4.628-10.319-2.455-3.527 2.172-4.626 6.792-2.455 10.318l14.236 23.123c2.692 4.37 8.878 4.807 12.156.863z"/><path d="m116.804 293.991 14.236 23.123c2.69 4.37 8.876 4.807 12.154.862l46.751-56.244c2.648-3.186 2.212-7.914-.974-10.562-3.184-2.647-7.914-2.212-10.562.974l-40.074 48.211-8.759-14.228c-2.171-3.527-6.79-4.628-10.319-2.455-3.526 2.173-4.625 6.793-2.453 10.319z"/><path d="m116.804 393.658 14.236 23.123c2.69 4.37 8.876 4.807 12.154.862l46.751-56.244c2.648-3.186 2.212-7.914-.974-10.562-3.184-2.647-7.914-2.212-10.562.974l-40.074 48.211-8.759-14.228c-2.171-3.527-6.79-4.627-10.319-2.455-3.526 2.173-4.625 6.793-2.453 10.319z"/><path d="m448.5 423.405c-4.142 0-7.5 3.357-7.5 7.5v54.595c0 6.341-5.159 11.5-11.5 11.5h-347c-6.341 0-11.5-5.159-11.5-11.5v-328.691c0-4.143-3.358-7.5-7.5-7.5s-7.5 3.357-7.5 7.5v328.691c0 14.612 11.888 26.5 26.5 26.5h347c14.612 0 26.5-11.888 26.5-26.5v-54.595c0-4.142-3.358-7.5-7.5-7.5z"/><path d="m429.5 57.791h-36.688v-30.991c0-14.777-12.022-26.8-26.8-26.8s-26.8 12.022-26.8 26.8v30.991h-56.412v-30.991c0-14.778-12.023-26.8-26.8-26.8s-26.8 12.022-26.8 26.8v30.991h-56.413v-30.991c0-14.777-12.022-26.8-26.8-26.8-14.777 0-26.8 12.022-26.8 26.8v30.991h-36.687c-14.612 0-26.5 11.888-26.5 26.5v37.518c0 4.143 3.358 7.5 7.5 7.5s7.5-3.357 7.5-7.5v-37.518c0-6.341 5.159-11.5 11.5-11.5h36.687v11.909c0 14.777 12.022 26.8 26.8 26.8s26.8-12.022 26.8-26.8v-11.909h56.413v11.909c0 14.777 12.022 26.8 26.8 26.8s26.8-12.022 26.8-26.8v-11.909h56.413v11.909c0 14.777 12.022 26.8 26.8 26.8 14.777 0 26.8-12.022 26.8-26.8v-11.909h36.687c6.341 0 11.5 5.159 11.5 11.5v311.614c0 4.143 3.358 7.5 7.5 7.5s7.5-3.357 7.5-7.5v-311.614c0-14.612-11.888-26.5-26.5-26.5zm-271.712 26.909c0 6.507-5.293 11.8-11.8 11.8-6.506 0-11.8-5.293-11.8-11.8 0-15.987 0-52.896 0-57.9 0-6.507 5.293-11.8 11.8-11.8s11.8 5.293 11.8 11.8zm110.012 0c0 6.507-5.293 11.8-11.8 11.8s-11.8-5.293-11.8-11.8c0-15.987 0-52.896 0-57.9 0-6.507 5.293-11.8 11.8-11.8s11.8 5.293 11.8 11.8zm110.013 0c0 6.507-5.293 11.8-11.8 11.8s-11.8-5.293-11.8-11.8c0-15.987 0-52.896 0-57.9 0-6.507 5.293-11.8 11.8-11.8 6.506 0 11.8 5.293 11.8 11.8z"/><path d="m221.739 225.183h158c12.958 0 23.5-10.542 23.5-23.5s-10.542-23.5-23.5-23.5h-158c-12.958 0-23.5 10.542-23.5 23.5s10.542 23.5 23.5 23.5zm0-32h158c4.687 0 8.5 3.813 8.5 8.5s-3.813 8.5-8.5 8.5h-158c-4.687 0-8.5-3.813-8.5-8.5s3.813-8.5 8.5-8.5z"/><path d="m221.739 324.396h158c12.958 0 23.5-10.542 23.5-23.5s-10.542-23.5-23.5-23.5h-158c-12.958 0-23.5 10.542-23.5 23.5s10.542 23.5 23.5 23.5zm0-32h158c4.687 0 8.5 3.813 8.5 8.5s-3.813 8.5-8.5 8.5h-158c-4.687 0-8.5-3.813-8.5-8.5s3.813-8.5 8.5-8.5z"/><path d="m221.739 423.608h158c12.958 0 23.5-10.542 23.5-23.5s-10.542-23.5-23.5-23.5h-158c-12.958 0-23.5 10.542-23.5 23.5s10.542 23.5 23.5 23.5zm0-32h158c4.687 0 8.5 3.813 8.5 8.5s-3.813 8.5-8.5 8.5h-158c-4.687 0-8.5-3.813-8.5-8.5s3.813-8.5 8.5-8.5z"/></g></svg>	
	CRÉER UNE TÂCHE</h1>
		
	<form action="createUpdate.php" method="get" class="create-task">
	<p>	
		

		<input type="hidden" name="id" value="<?php echo $task['id'];  ?>"/>
		<input type="hidden" name="action" value="<?php echo $action;  ?>"/>
		 <div class="form-field">
        	<label for="name">Nom :</label>
        	<input maxlength=250 required type="text" id="nom" name="nom" value="<?php echo $task['nom'];  ?>">
	    </div>
	    <div class="form-field">
	        <label for="statusTask">Status :</label>
			<select name="statusTask" id="statusTask">
				<option value="A faire">A faire</option>
				<option value="En cours">En cours</option>
				<option value="Terminée">Terminée</option>
			</select>
		</div>
		<div class="button">
			<button type="submit" class="create"><?php echo $libelle;  ?></button>
		</div>
		
	</p>


	</form>
	<a href="index.php" class="return">

	<br>
	<?php if ($action!="CREATE") { ?>
	<form class="nodisplay" action="createUpdate.php" method="get">
		<input type="hidden" name="action" value="DELETE"/>
		<input type="hidden" name="id" value="<?php echo $task['id'];  ?>"/>
		<p>
		<div class="button-delete">
			<button type="submit" class="delete">Supprimer</button>
		</div>
		</p>
		<a href="index.php" class="return">
		<svg class="return" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" 
	 viewBox="0 0 447.243 447.243" >
	
		<path d="M420.361,192.229c-1.83-0.297-3.682-0.434-5.535-0.41H99.305l6.88-3.2c6.725-3.183,12.843-7.515,18.08-12.8l88.48-88.48
			c11.653-11.124,13.611-29.019,4.64-42.4c-10.441-14.259-30.464-17.355-44.724-6.914c-1.152,0.844-2.247,1.764-3.276,2.754
			l-160,160C-3.119,213.269-3.13,233.53,9.36,246.034c0.008,0.008,0.017,0.017,0.025,0.025l160,160
			c12.514,12.479,32.775,12.451,45.255-0.063c0.982-0.985,1.899-2.033,2.745-3.137c8.971-13.381,7.013-31.276-4.64-42.4
			l-88.32-88.64c-4.695-4.7-10.093-8.641-16-11.68l-9.6-4.32h314.24c16.347,0.607,30.689-10.812,33.76-26.88
			C449.654,211.494,437.806,195.059,420.361,192.229z"/>
		</svg>

			Retourner à la liste des taches
		</a>
	</form>
	
	<?php } ?>

	

</body>
</html>